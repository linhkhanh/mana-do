import React, { useState } from 'react';
import { useHistory } from 'react-router-dom'
import Service from '../service'

const SignInPage = () => {
    const [form, setForm] = useState({
        userId: '',
        password: ''
    });
    const history = useHistory();

    const signIn = async (e: React.FormEvent<HTMLFormElement>) => {
        e.preventDefault()
        const resp = await Service.signIn(form.userId, form.password)
        localStorage.setItem('token', resp)
        history.push('/todo')
    }

    const onChangeField = (e: React.ChangeEvent<HTMLInputElement>) => {
        e.persist()
        setForm(prev => ({
            ...prev,
            [e.target.name]: e.target.value
        }))
    }

    return (
        <div className="sign-in">
            <svg id="_x33_0" enableBackground="new 0 0 64 64" height="220" viewBox="0 0 64 64" width="220"
                xmlns="http://www.w3.org/2000/svg"><g><g><g><path d="m24.44 39.56-14.94 14.94-4.5-4.5 15.6-15.6c1.03 1.91 2.32 3.64 3.84 5.16z" fill="#fcd770" /></g><g><path d="m24.44 39.56c1.52 1.51 3.26 2.81 5.16 3.84l-1.6 1.6-14 14-4.5-4.5z" fill="#b4dd7f" /></g><g><path d="m14 59-12 3 3-12 4.5 4.5z" fill="#aab2bd" /></g><g><path d="m57.92 39.63c.01.02.02.03.02.05.58 1.4 1.95 2.32 3.48 2.32h.58v6h-.58c-1.53 0-2.9.92-3.48 2.32 0 .02-.01.03-.02.05-.59 1.41-.27 3.03.81 4.12l.41.41-4.24 4.24-.41-.41c-1.09-1.08-2.71-1.4-4.12-.81-.02.01-.03.02-.05.02-1.4.58-2.32 1.95-2.32 3.48v.58h-6v-.58c0-1.53-.92-2.9-2.32-3.48-.02 0-.03-.01-.05-.02-1.41-.59-3.03-.27-4.12.81l-.41.41-4.24-4.24.41-.41c1.08-1.09 1.4-2.71.81-4.12-.01-.02-.02-.03-.02-.05-.58-1.4-1.95-2.32-3.48-2.32h-.58v-3l1.6-1.6c1.98 1.06 4.14 1.82 6.42 2.24.33 4.67 4.23 8.36 8.98 8.36 4.97 0 9-4.03 9-9 0-1.23-.25-2.4-.7-3.47v-.01c1.75-1.32 3.3-2.91 4.58-4.7-.34.89-.34 1.9.04 2.81z" fill="#ffc729" /></g><g><path d="m53.3 41.53c.45 1.07.7 2.24.7 3.47 0 4.97-4.03 9-9 9-4.75 0-8.65-3.69-8.98-8.36 1.29.24 2.62.36 3.98.36h.1c.46 2.28 2.48 4 4.9 4 2.76 0 5-2.24 5-5 0-.45-.06-.89-.17-1.31 1.22-.62 2.38-1.34 3.47-2.16z" fill="#fcd770" /></g><g><path d="m53.3 41.53c-1.09.82-2.25 1.54-3.47 2.16-2.93 1.46-6.23 2.29-9.73 2.31-.03 0-.07 0-.1 0-1.36 0-2.69-.12-3.98-.36-2.28-.42-4.44-1.18-6.42-2.24-1.9-1.03-3.64-2.33-5.16-3.84-1.52-1.52-2.81-3.25-3.84-5.16-1.66-3.1-2.6-6.64-2.6-10.4 0-12.15 9.85-22 22-22 6.08 0 11.58 2.46 15.56 6.44s6.44 9.48 6.44 15.56c0 4.79-1.53 9.21-4.12 12.82-1.28 1.79-2.83 3.38-4.58 4.7z" fill="#ff826e" /></g><g><path d="m51.32 12.68c2.89 2.9 4.68 6.9 4.68 11.32 0 8.84-7.16 16-16 16s-16-7.16-16-16 7.16-16 16-16c4.42 0 8.42 1.79 11.32 4.68z" fill="#ffeaa7" /></g><g><path d="m2 18h4v4h-4z" fill="#ff826e" /></g><g><path d="m2 2h4v4h-4z" fill="#ff826e" /></g><g><path d="m2 10h4v4h-4z" fill="#ff826e" /></g><g><path d="m2 26h4v4h-4z" fill="#ff826e" /></g></g><g><path d="m39 31h2v2h-2z" /><path d="m43 31h2v2h-2z" /><path d="m35 31h2v2h-2z" /><path d="m7 1h-6v6h6zm-2 4h-2v-2h2z" /><path d="m9 3h10v2h-10z" /><path d="m7 9h-6v6h6zm-2 4h-2v-2h2z" /><path d="m9 11h10v2h-10z" /><path d="m7 17h-6v6h6zm-2 4h-2v-2h2z" /><path d="m7 25h-6v6h6zm-2 4h-2v-2h2z" /><path d="m58.846 39.247c-.271-.651-.284-1.367-.045-2.022 2.641-3.744 4.199-8.305 4.199-13.225 0-5.982-2.297-11.437-6.054-15.532l5.761-5.761-1.414-1.414-5.761 5.761c-4.095-3.757-9.55-6.054-15.532-6.054-10.965 0-20.156 7.715-22.446 18h-8.554v2h8.202c-.129.983-.202 1.983-.202 3s.073 2.017.202 3h-8.202v2h8.554c.406 1.822 1.026 3.563 1.837 5.195l-15.294 15.294-3.471 13.886 13.886-3.472 12.488-12.489v1.586h1.584c1.121 0 2.122.669 2.57 1.753.436 1.044.204 2.232-.589 3.025l-1.123 1.12 5.658 5.658 1.12-1.12c.794-.793 1.979-1.027 3.074-.57 1.037.428 1.706 1.428 1.706 2.55v1.584h8v-1.584c0-1.121.669-2.122 1.753-2.57 1.045-.436 2.231-.204 3.026.59l1.12 1.12 5.658-5.658-1.122-1.119c-.794-.794-1.025-1.981-.57-3.074.429-1.036 1.43-1.705 2.551-1.705h1.584v-8h-1.584c-1.121 0-2.122-.669-2.57-1.753zm-18.846-36.247c5.43 0 10.37 2.089 14.102 5.484l-2.827 2.827c-3.005-2.672-6.947-4.311-11.275-4.311-9.374 0-17 7.626-17 17s7.626 17 17 17 17-7.626 17-17c0-4.328-1.639-8.27-4.311-11.275l2.827-2.827c3.394 3.732 5.484 8.672 5.484 14.102 0 11.58-9.421 21-21 21s-21-9.42-21-21 9.421-21 21-21zm-3 25.414 14.275-14.275c2.312 2.64 3.725 6.085 3.725 9.861 0 8.271-6.729 15-15 15s-15-6.729-15-15 6.729-15 15-15c3.776 0 7.221 1.413 9.861 3.725l-12.861 12.861-4.293-4.293-1.414 1.414zm16 16.586c0 4.411-3.589 8-8 8-3.75 0-6.948-2.628-7.782-6.174.703.085 1.414.138 2.135.158.832 2.365 3.082 4.016 5.647 4.016 3.309 0 6-2.691 6-6 0-.26-.018-.52-.051-.777.625-.34 1.232-.709 1.82-1.104.147.613.231 1.24.231 1.881zm-4.017.172c-.093 2.125-1.836 3.828-3.983 3.828-1.474 0-2.792-.82-3.485-2.055 2.633-.173 5.148-.785 7.468-1.773zm-36.939 13.286-4.938 1.234-2.799-2.799 1.235-4.937zm-1.13-3.958 13.554-13.554c1.082.993 2.259 1.883 3.516 2.656l-13.984 13.984zm12.14-14.968-13.554 13.554-3.086-3.086 13.984-13.984c.773 1.257 1.663 2.434 2.656 3.516zm-19.312 19.624 1.102 1.102-1.47.367zm57.258-12.138c-1.762.152-3.298 1.269-4 2.966-.695 1.666-.4 3.546.74 4.903l-2.854 2.854c-1.358-1.141-3.241-1.435-4.945-.723-1.658.685-2.771 2.22-2.924 3.982h-4.035c-.152-1.763-1.27-3.299-2.966-4-1.665-.695-3.546-.401-4.903.741l-2.854-2.854c1.14-1.357 1.434-3.241.723-4.947-.686-1.657-2.221-2.77-3.982-2.922v-1.604l.805-.805c1.667.828 3.447 1.459 5.311 1.864.718 4.838 4.916 8.527 9.884 8.527 5.514 0 10-4.486 10-10 0-1.082-.179-2.137-.516-3.15.85-.691 1.649-1.441 2.392-2.244.047.151.08.304.142.454.686 1.657 2.221 2.77 3.982 2.922z" /><circle cx="45" cy="58" r="1" /><path d="m54 53c-.256 0-.512.098-.707.293-.391.391-.391 1.024 0 1.414.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.024 0-1.414-.195-.195-.451-.293-.707-.293z" /><circle cx="58" cy="45" r="1" /><path d="m36 53c-.256 0-.512.098-.707.293-.391.391-.391 1.024 0 1.414.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.024 0-1.414-.195-.195-.451-.293-.707-.293z" /></g></g></svg>
            <h1>Work on Time</h1>
            <hr></hr>
            <form onSubmit={signIn} className="login-form">
                <h3 className="login">Sign In</h3>
                <div className="floating-label-group">
                    <input
                        id="user_id"
                        name="userId"
                        value={form.userId}
                        onChange={onChangeField}
                        className="input-signin"
                        required
                    />
                    <label className="floating-label">Username</label>
                </div>

                <div className="floating-label-group">
                    <input
                        id="password"
                        name="password"
                        type="password"
                        required
                        value={form.password}
                        onChange={onChangeField}
                        className="input-signin"
                    />
                    <label className="floating-label">Password</label>
                </div>
                <button type="submit" style={{ marginTop: 12 }} className="submit-btn">
                    Submit
                </button>
            </form>
        </div>
    );
};

export default SignInPage;